<!doctype html>
<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebMusicScore Browser Example</title>
</head>

<body>
    <h1>WebMusicScore Browser Example</h1>

    <p>
        This is an example of how to use browser version of WebMusicScore.
        Take a look at the html soure code.
    </p>

    <script src="https://unpkg.com/@tspro/web-music-score@3.0.0/dist/iife/index.global.js"></script>

    <canvas id="scoreCanvas"></canvas><br />
    <button id="playButton" type="button"></button>

    <script>
        const { Score, Theory } = window.WebMusicScore;

        let doc = createDocument();

        new Score.MRenderer().
            setCanvas("scoreCanvas").
            setDocument(doc).
            draw();

        new Score.MPlaybackButtons().
            setPlayStopButton("playButton").
            setDocument(doc);

        function createDocument() {
            return new Score.DocumentBuilder()
                .setScoreConfiguration(Score.StaffPreset.GuitarTreble)
                .setHeader("Andante", "A. Diabelli")

                .addMeasure()
                .setKeySignature("D", Theory.ScaleType.Major)
                .setTimeSignature("3/4")
                .setTempo(80)
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "G4" }).addAnnotation(Score.Annotation.Dynamics, "p")
                .addNote(0, "F#4", Theory.NoteLength.Eighth, { stem: Score.Stem.Up })
                .addNote(0, "G4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(1, "D3", Theory.NoteLength.Half, { dotted: true, stem: Score.Stem.Down })

                .addMeasure()
                .addNote(0, "C#4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "G4", Theory.NoteLength.Quarter)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "B3" }).addAnnotation(Score.Annotation.Dynamics, "f")
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "G#3", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "B3", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Eighth)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })
                .endRow()

                .addMeasure()
                .addNote(0, "D4", Theory.NoteLength.Eighth, { string: 3 })
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "G4", Theory.NoteLength.Eighth)
                .addNote(0, "A4", Theory.NoteLength.Quarter)
                .addNote(1, "D3", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "G4" }).addAnnotation(Score.Annotation.Dynamics, "p")
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "G4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(1, "D3", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addNote(0, "C#4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "G4", Theory.NoteLength.Quarter)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })
                .endRow()

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "B3" }).addAnnotation(Score.Annotation.Dynamics, "f")
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "G#3", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "B3", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Eighth)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addNote(0, "D4", Theory.NoteLength.Quarter)
                .addRest(1, Theory.NoteLength.Quarter, { staffPos: "D3" })
                .addNote(0, "D3", Theory.NoteLength.Quarter) // Stem up...
                .addNote(1, "D3", Theory.NoteLength.Quarter) // ...and down
                .addRest(1, Theory.NoteLength.Quarter, { staffPos: "B3" })
                .addNavigation(Score.Navigation.EndRepeat)

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "D4" }).addAnnotation(Score.Annotation.Dynamics, "f")
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Eighth)
                .addNote(0, "B3", Theory.NoteLength.Eighth)
                .addNote(1, "E2", Theory.NoteLength.Half, { dotted: true })
                .endRow()

                .addMeasure()
                .addNote(0, "C#4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Quarter)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "B3" }).addAnnotation(Score.Annotation.Dynamics, "p")
                .addNote(0, "E3", Theory.NoteLength.Eighth)
                .addNote(0, "D#3", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "E3", Theory.NoteLength.Eighth)
                .addNote(0, "F#3", Theory.NoteLength.Eighth)
                .addNote(0, "G#3", Theory.NoteLength.Eighth)
                .addNote(1, "E2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addNote(0, "A3", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "G#3", Theory.NoteLength.Eighth)
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "B3", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Quarter)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })
                .endRow()

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "G4" }).addAnnotation(Score.Annotation.Dynamics, "f")
                .addNote(0, "G4", Theory.NoteLength.Eighth)
                .addNote(0, "A4", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "G4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Eighth)
                .addNote(0, "D4", Theory.NoteLength.Eighth)
                .addNote(0, "E4", Theory.NoteLength.Eighth)
                .addNote(0, "F#4", Theory.NoteLength.Quarter)
                .addNote(1, "D3", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addRest(0, Theory.NoteLength.Eighth, { staffPos: "B3" }).addAnnotation(Score.Annotation.Dynamics, "ff")
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "G#3", Theory.NoteLength.Eighth).addConnective(Score.Connective.Slur, 2, Score.NoteAnchor.Below)
                .addNote(0, "A3", Theory.NoteLength.Eighth)
                .addNote(0, "B3", Theory.NoteLength.Eighth)
                .addNote(0, "C#4", Theory.NoteLength.Eighth)
                .addNote(1, "A2", Theory.NoteLength.Half, { dotted: true })

                .addMeasure()
                .addNote(0, "D4", Theory.NoteLength.Quarter)
                .addRest(1, Theory.NoteLength.Quarter, { staffPos: "D3" })
                .addNote(0, "D3", Theory.NoteLength.Quarter) // Stem up... 
                .addNote(1, "D3", Theory.NoteLength.Quarter) // ...and down
                .addRest(1, Theory.NoteLength.Quarter, { staffPos: "B3" })
                .endSong()

                .getDocument();
        }
    </script>
</body>

</html>