<!doctype html>
<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebMusicScore Browser Example</title>
</head>

<body>
    <h1>WebMusicScore Browser Example</h1>

    <p>
        This is an example of how to use browser version of WebMusicScore.
        Take a look at the html soure code.
    </p>

    <script src="https://unpkg.com/@tspro/web-music-score@5.0.0/dist/iife/index.global.js"></script>
    <script src="https://unpkg.com/@tspro/web-music-score@5.0.0/dist/iife/audio-cg.global.js"></script>

    <canvas id="scoreCanvas"></canvas><br />
    <button id="playButton" type="button"></button>

    <script>
        const { Audio, Score, Theory } = window.WebMusicScore;
        const { ClassicalGuitar } = window.Audio_ClassicalGuitar;

        // You can omit this (and audio-cg script bundle above) if you wish to use synthesizer audio only.
        Audio.addInstrument(ClassicalGuitar);

        // Audio.useInstrument("Synthesizer");
        // Audio.useInstrument("Classical Guitar");

        let doc = createDocument();

        new Score.MRenderer().
            setCanvas("scoreCanvas").
            setDocument(doc).
            draw();

        new Score.MPlaybackButtons().
            setPlayStopButton("playButton").
            setDocument(doc);

        function createDocument() {
            return new Score.DocumentBuilder()
                .setHeader("Andante", "A. Diabelli")
                .setScoreConfiguration("guitarTreble")

                .addMeasure()
                .setKeySignature("D Major")
                .setTimeSignature("3/4")
                .setTempo(80)
                .addRest(0, "8n", { staffPos: "G4" }).addAnnotation("dynamics", "p")
                .addNote(0, "F#4", "8n", { stem: "up" })
                .addNote(0, "G4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "F#4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "D4", "8n")
                .addNote(1, "D3", "2.", { stem: "down" })

                .addMeasure()
                .addNote(0, "C#4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "D4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "F#4", "8n")
                .addNote(0, "G4", "4n")
                .addNote(1, "A2", "2.")

                .addMeasure()
                .addRest(0, "8n", { staffPos: "B3" }).addAnnotation("dynamics", "f")
                .addNote(0, "A3", "8n")
                .addNote(0, "G#3", "8n").addConnective("slur", 2, "below")
                .addNote(0, "A3", "8n")
                .addNote(0, "B3", "8n")
                .addNote(0, "C#4", "8n")
                .addNote(1, "A2", "2.")
                .endRow()

                .addMeasure()
                .addNote(0, "D4", "8n", { string: 3 })
                .addNote(0, "E4", "8n")
                .addNote(0, "F#4", "8n")
                .addNote(0, "G4", "8n")
                .addNote(0, "A4", "4n")
                .addNote(1, "D3", "2.")

                .addMeasure()
                .addRest(0, "8n", { staffPos: "G4" }).addAnnotation("dynamics", "p")
                .addNote(0, "F#4", "8n")
                .addNote(0, "G4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "F#4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "D4", "8n")
                .addNote(1, "D3", "2.")

                .addMeasure()
                .addNote(0, "C#4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "D4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "F#4", "8n")
                .addNote(0, "G4", "4n")
                .addNote(1, "A2", "2.")
                .endRow()

                .addMeasure()
                .addRest(0, "8n", { staffPos: "B3" }).addAnnotation("dynamics", "f")
                .addNote(0, "A3", "8n")
                .addNote(0, "G#3", "8n").addConnective("slur", 2, "below")
                .addNote(0, "A3", "8n")
                .addNote(0, "B3", "8n")
                .addNote(0, "C#4", "8n")
                .addNote(1, "A2", "2.")

                .addMeasure()
                .addNote(0, "D4", "4n")
                .addRest(1, "4n", { staffPos: "D3" })
                .addNote(0, "D3", "4n") // Stem up...
                .addNote(1, "D3", "4n") // ...and down
                .addRest(1, "4n", { staffPos: "B3" })
                .addNavigation("endRepeat")

                .addMeasure()
                .addRest(0, "8n", { staffPos: "D4" }).addAnnotation("dynamics", "f")
                .addNote(0, "D4", "8n")
                .addNote(0, "E4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "D4", "8n")
                .addNote(0, "C#4", "8n")
                .addNote(0, "B3", "8n")
                .addNote(1, "E2", "2.")
                .endRow()

                .addMeasure()
                .addNote(0, "C#4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "D4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "F#4", "8n")
                .addNote(0, "E4", "4n")
                .addNote(1, "A2", "2.")

                .addMeasure()
                .addRest(0, "8n", { staffPos: "B3" }).addAnnotation("dynamics", "p")
                .addNote(0, "E3", "8n")
                .addNote(0, "D#3", "8n").addConnective("slur", 2, "below")
                .addNote(0, "E3", "8n")
                .addNote(0, "F#3", "8n")
                .addNote(0, "G#3", "8n")
                .addNote(1, "E2", "2.")

                .addMeasure()
                .addNote(0, "A3", "8n").addConnective("slur", 2, "below")
                .addNote(0, "G#3", "8n")
                .addNote(0, "A3", "8n")
                .addNote(0, "B3", "8n")
                .addNote(0, "C#4", "4n")
                .addNote(1, "A2", "2.")
                .endRow()

                .addMeasure()
                .addRest(0, "8n", { staffPos: "G4" }).addAnnotation("dynamics", "f")
                .addNote(0, "G4", "8n")
                .addNote(0, "A4", "8n").addConnective("slur", 2, "below")
                .addNote(0, "G4", "8n")
                .addNote(0, "F#4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(1, "A2", "2.")

                .addMeasure()
                .addNote(0, "D4", "8n")
                .addNote(0, "C#4", "8n")
                .addNote(0, "D4", "8n")
                .addNote(0, "E4", "8n")
                .addNote(0, "F#4", "4n")
                .addNote(1, "D3", "2.")

                .addMeasure()
                .addRest(0, "8n", { staffPos: "B3" }).addAnnotation("dynamics", "ff")
                .addNote(0, "A3", "8n")
                .addNote(0, "G#3", "8n").addConnective("slur", 2, "below")
                .addNote(0, "A3", "8n")
                .addNote(0, "B3", "8n")
                .addNote(0, "C#4", "8n")
                .addNote(1, "A2", "2.")

                .addMeasure()
                .addNote(0, "D4", "4n")
                .addRest(1, "4n", { staffPos: "D3" })
                .addNote(0, "D3", "4n") // Stem up... 
                .addNote(1, "D3", "4n") // ...and down
                .addRest(1, "4n", { staffPos: "B3" })
                .endSong()

                .getDocument();
        }
    </script>
</body>

</html>